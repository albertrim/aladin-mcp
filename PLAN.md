# 알라딘 OpenAPI MCP 서버 개발 계획 (Node.js)

## 1. Node.js 프로젝트 초기 설정

- [ ] `pnpm init`으로 package.json 생성
- [ ] TypeScript 설정 파일 생성 (tsconfig.json)
- [ ] 개발 환경 의존성 설치
  - [ ] `typescript`
  - [ ] `@types/node`
  - [ ] `ts-node`
  - [ ] `nodemon`
- [ ] MCP SDK 설치: `@modelcontextprotocol/sdk`
- [ ] HTTP 클라이언트 설치: `axios`
- [ ] XML 파서 설치: `fast-xml-parser`
- [ ] 환경변수 관리: `dotenv`
- [ ] 테스트 프레임워크: `jest`, `@types/jest`
- [ ] 코드 품질 도구: `eslint`, `prettier` (선택사항)
- [ ] 로깅 라이브러리: `winston` 또는 `pino` (선택사항)

## 2. 프로젝트 구조 설계

```
aladin-mcp-server/
├── src/
│   ├── index.ts (MCP 서버 진입점)
│   ├── client.ts (알라딘 API 클라이언트)
│   ├── types.ts (타입 정의)
│   ├── tools/ (MCP 도구들)
│   ├── utils/ (유틸리티 함수들)
│   │   ├── validators.ts (파라미터 검증)
│   │   ├── formatters.ts (응답 포맷터)
│   │   └── logger.ts (로깅 유틸리티)
│   └── constants/ (상수 정의)
│       └── api.ts (API 관련 상수)
├── tests/
│   ├── unit/ (단위 테스트)
│   ├── integration/ (통합 테스트)
│   └── fixtures/ (테스트용 데이터)
├── .env.example
├── .gitignore
├── .npmignore
├── package.json
├── tsconfig.json
├── jest.config.js
├── CLAUDE.md
├── PLAN.md
└── README.md
```

### 체크리스트

- [ ] 프로젝트 디렉토리 생성
- [ ] src 폴더 및 하위 구조 생성
- [ ] tools 폴더 생성
- [ ] utils 폴더 및 유틸리티 파일들 생성
- [ ] constants 폴더 생성
- [ ] tests 폴더 및 하위 구조 생성
- [ ] 환경설정 파일들 생성 (.env.example, .gitignore, .npmignore)
- [ ] 설정 파일들 생성 (tsconfig.json, jest.config.js)

## 3. 알라딘 API 클라이언트 구현

### 3.1 기본 설정

- [ ] API 기본 URL 상수 정의
- [ ] TTB 키 환경변수 설정
- [ ] Axios 인스턴스 생성 및 기본 설정

### 3.2 타입 정의 (types.ts)

- [ ] 알라딘 API 응답 인터페이스 정의
  - [ ] 검색 API 응답 타입
  - [ ] 상세 정보 API 응답 타입
  - [ ] 베스트셀러 API 응답 타입
  - [ ] 신간 API 응답 타입
- [ ] 검색 파라미터 타입 정의
  - [ ] 공통 검색 파라미터 (Query, QueryType, SearchTarget)
  - [ ] 정렬 옵션 (Sort)
  - [ ] 페이지네이션 파라미터
- [ ] 도서 정보 타입 정의
  - [ ] 기본 도서 정보 (제목, 저자, 출판사, ISBN)
  - [ ] 추가 정보 (가격, 할인율, 출간일, 설명)
  - [ ] 이미지 정보 (표지, 목차)
- [ ] 베스트셀러/신간 리스트 타입 정의
  - [ ] 분야 코드 enum 정의
  - [ ] 기간 타입 정의
- [ ] MCP 도구별 입력/출력 타입 정의
- [ ] 에러 응답 타입 정의

### 3.3 API 메서드 구현 (client.ts)

- [ ] `searchBooks()` - 도서 검색 API
  - [ ] 파라미터 검증
  - [ ] HTTP 요청 구현
  - [ ] XML/JSON 응답 파싱
  - [ ] 에러 처리
- [ ] `getBookDetails()` - 도서 상세 정보 API
  - [ ] ISBN 검증
  - [ ] API 호출 구현
  - [ ] 응답 데이터 변환
- [ ] `getBestsellerList()` - 베스트셀러 목록 API
  - [ ] 분야별 파라미터 처리
  - [ ] API 호출 및 파싱
- [ ] `getNewReleasesList()` - 신간 목록 API
  - [ ] 날짜 범위 파라미터 처리
  - [ ] API 호출 및 결과 처리
- [ ] 공통 유틸리티 메서드
  - [ ] API 응답 에러 핸들러
  - [ ] 요청 재시도 로직 (네트워크 에러 시)
  - [ ] 응답 데이터 정규화
  - [ ] 캐싱 메커니즘 (선택사항)

## 4. MCP 도구 구현

### 4.1 도구 정의

- [ ] **aladin_search**: 키워드로 도서 검색
  - [ ] 도구 스키마 정의
  - [ ] 입력 파라미터 검증
  - [ ] 검색 결과 포맷팅
- [ ] **aladin_book_info**: ISBN으로 도서 상세 조회
  - [ ] ISBN 형식 검증
  - [ ] 상세 정보 조회 및 포맷팅
- [ ] **aladin_bestsellers**: 분야별 베스트셀러 조회
  - [ ] 분야 코드 검증
  - [ ] 베스트셀러 목록 포맷팅
- [ ] **aladin_new_books**: 신간 도서 목록 조회
  - [ ] 날짜 파라미터 처리
  - [ ] 신간 목록 포맷팅

### 4.2 공통 기능

- [ ] 응답 데이터 통일된 포맷으로 변환
- [ ] 에러 메시지 표준화
- [ ] 도구별 사용법 도움말 추가

## 5. 서버 설정 및 실행 (index.ts)

### 5.1 MCP 서버 초기화

- [ ] MCP 서버 인스턴스 생성
- [ ] 서버 메타데이터 설정 (이름, 버전)
- [ ] stdio 전송 설정

### 5.2 도구 등록

- [ ] 각 도구의 스키마 정의
- [ ] 도구 핸들러 함수 구현
- [ ] 도구 등록 및 바인딩

### 5.3 서버 실행

- [ ] 서버 시작 로직 구현
- [ ] 연결 상태 관리
- [ ] 종료 신호 처리

## 6. 유틸리티 및 공통 모듈 구현

### 6.1 검증 유틸리티 (utils/validators.ts)

- [ ] ISBN 검증 함수 (ISBN-10, ISBN-13)
- [ ] 분야 코드 검증
- [ ] 날짜 형식 검증
- [ ] 검색 파라미터 검증
- [ ] 페이지네이션 파라미터 검증

### 6.2 포맷터 유틸리티 (utils/formatters.ts)

- [ ] MCP 응답 표준 포맷터
- [ ] 도서 정보 포맷터
- [ ] 에러 메시지 포맷터
- [ ] 날짜 포맷터
- [ ] 가격 정보 포맷터

### 6.3 로깅 유틸리티 (utils/logger.ts)

- [ ] 로깅 레벨 설정 (debug, info, warn, error)
- [ ] API 호출 로깅
- [ ] 에러 로깅
- [ ] 사용량 통계 로깅

### 6.4 상수 정의 (constants/api.ts)

- [ ] API 엔드포인트 URL
- [ ] 분야 코드 상수
- [ ] 기본 파라미터 값
- [ ] 에러 메시지 상수
- [ ] MCP 도구 스키마 상수

## 7. 에러 처리 및 검증

### 7.1 API 제한사항 관리

- [ ] 일일 5,000회 호출 제한 추적
- [ ] 요청 빈도 제한 구현 (Rate Limiting)
- [ ] API 키 유효성 검증
- [ ] 사용량 로깅 및 모니터링
- [ ] 제한 도달 시 적절한 에러 메시지

### 7.2 에러 처리

- [ ] 네트워크 에러 처리
  - [ ] 연결 타임아웃 처리
  - [ ] 재시도 로직 구현
  - [ ] 백오프 전략
- [ ] API 응답 에러 처리
  - [ ] HTTP 상태 코드별 처리
  - [ ] 알라딘 API 에러 코드 매핑
  - [ ] 사용자 친화적 에러 메시지
- [ ] 파라미터 검증 에러 처리
  - [ ] 필수 파라미터 누락 검증
  - [ ] 형식 오류 검증
  - [ ] 범위 값 검증
- [ ] MCP 프로토콜 에러 처리
  - [ ] 도구 호출 에러
  - [ ] 스키마 유효성 검사 에러

## 8. 테스트 및 문서화

### 8.1 테스트

- [ ] Jest 테스트 환경 설정
  - [ ] jest.config.js 설정
  - [ ] TypeScript 지원 설정
  - [ ] 테스트 커버리지 설정
- [ ] 단위 테스트 작성 (tests/unit/)
  - [ ] API 클라이언트 테스트
  - [ ] 각 MCP 도구별 테스트
  - [ ] 유틸리티 함수 테스트
  - [ ] 검증 로직 테스트
- [ ] 통합 테스트 작성 (tests/integration/)
  - [ ] MCP 서버 전체 동작 테스트
  - [ ] 도구 간 연계 테스트
- [ ] 테스트 픽스처 준비 (tests/fixtures/)
  - [ ] 모킹용 API 응답 데이터
  - [ ] 테스트용 도서 정보 데이터
- [ ] 모킹을 통한 API 테스트
  - [ ] Axios 모킹 설정
  - [ ] 다양한 응답 시나리오 테스트
  - [ ] 에러 상황 테스트

### 8.2 문서화

- [ ] README.md 작성
  - [ ] 프로젝트 개요 및 목적
  - [ ] 설치 방법 및 요구사항
  - [ ] 알라딘 API 키 설정 방법
  - [ ] Claude Desktop 연동 방법
  - [ ] 사용법 및 예제
  - [ ] 문제해결 (Troubleshooting)
- [ ] API 문서 작성
  - [ ] 각 MCP 도구별 상세 문서
  - [ ] 파라미터 설명
  - [ ] 응답 형식 설명
  - [ ] 사용 예제
- [ ] 개발자 가이드 작성
  - [ ] 프로젝트 구조 설명
  - [ ] 기여 방법
  - [ ] 코딩 스타일 가이드
- [ ] 환경변수 설정 가이드 (.env.example)
- [ ] 변경 로그 (CHANGELOG.md) 준비

## 9. 배포 준비

### 9.1 빌드 설정

- [ ] TypeScript 컴파일 설정 최적화
  - [ ] 프로덕션용 tsconfig.json
  - [ ] 소스맵 설정
  - [ ] 불필요한 타입 정의 제거
- [ ] 빌드 스크립트 작성
  - [ ] 빌드 전 린팅 및 테스트 실행
  - [ ] 빌드 후 검증
  - [ ] 배포용 파일 복사
- [ ] 번들링 및 최적화
  - [ ] 의존성 번들링
  - [ ] 코드 압축 (minification)
  - [ ] Tree shaking

### 9.2 Claude Desktop 연동

- [ ] MCP 서버 설정 파일 예시 작성
  - [ ] claude_desktop_config.json 예시
  - [ ] 서버 경로 및 실행 방법 정의
  - [ ] 환경변수 설정 방법
- [ ] Claude Desktop 설정 가이드 작성
  - [ ] 설정 파일 위치 안내
  - [ ] 설정 방법 단계별 설명
  - [ ] 설정 확인 방법
- [ ] 연동 테스트 수행
  - [ ] 기본 연결 테스트
  - [ ] 각 도구별 동작 테스트
  - [ ] 에러 상황 테스트

### 9.3 패키지 배포

- [ ] npm 패키지 메타데이터 설정
  - [ ] package.json 완성
  - [ ] 키워드 및 설명 추가
  - [ ] 라이선스 설정
  - [ ] 저장소 URL 설정
- [ ] .npmignore 파일 작성
  - [ ] 소스 파일 제외
  - [ ] 테스트 파일 제외
  - [ ] 개발용 설정 파일 제외
- [ ] 배포 스크립트 작성
  - [ ] 자동 빌드 및 테스트
  - [ ] 버전 태깅
  - [ ] 배포 후 검증
- [ ] 버전 관리 전략 수립
  - [ ] Semantic Versioning 적용
  - [ ] 릴리스 노트 작성 프로세스
  - [ ] 호환성 관리

## 10. 추가 기능 (선택사항)

### 10.1 성능 최적화

- [ ] 캐싱 시스템 구현
  - [ ] 메모리 캐시 (LRU)
  - [ ] 파일 기반 캐시
  - [ ] 캐시 무효화 전략
- [ ] 요청 최적화
  - [ ] 요청 배칭
  - [ ] 중복 요청 방지
  - [ ] 응답 압축

### 10.2 사용자 경험 개선

- [ ] 검색 결과 필터링 기능
  - [ ] 가격 범위 필터
  - [ ] 출간일 필터
  - [ ] 출판사 필터
- [ ] 다국어 지원
  - [ ] 에러 메시지 다국어화
  - [ ] 도구 설명 다국어화
- [ ] 진보된 검색 기능
  - [ ] 자동완성 제안
  - [ ] 유사 검색어 제안

### 10.3 모니터링 및 분석

- [ ] 상세한 로깅 및 모니터링
  - [ ] 성능 메트릭 수집
  - [ ] 에러 추적
  - [ ] 사용 패턴 분석
- [ ] 설정 파일을 통한 커스터마이징
  - [ ] 동적 설정 로딩
  - [ ] 설정 검증
  - [ ] 설정 변경 감지

### 10.4 보안 강화

- [ ] API 키 보안 강화
  - [ ] 키 로테이션 지원
  - [ ] 암호화 저장
- [ ] 입력 데이터 sanitization
- [ ] 사용량 제한 및 throttling
